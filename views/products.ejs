<%- include('partials/header', { 
    title: 'Productos',
    cartCount: typeof cartCount !== 'undefined' ? cartCount : 0 
}) %>

    <main class="container">
        <h1>Nuestros Productos</h1>
        
        <div class="products-grid">
            <% if (products && products.length > 0) { %>
                <% products.forEach(product => { %>
                <div class="product-card">
                    <div class="product-image">
                        <img src="/images/<%= product.image || 'caja.jpg' %>" alt="<%= product.name %>" 
                             onerror="this.src='/images/caja.jpg'">
                    </div>
                    <h3><%= product.name %></h3>
                    <p class="product-description"><%= product.description %></p>
                    <p class="product-price">$<%= product.price %></p>
                    <p class="product-stock">Stock: <%= product.stock %></p>
                    <div class="product-actions">
                        <button class="btn btn-primary add-to-cart" 
                                data-product-id="<%= product.id %>"
                                data-product-name="<%= product.name %>">
                            Agregar al Carrito
                        </button>
                    </div>
                </div>
                <% }) %>
            <% } else { %>
                <div class="no-products">
                    <p>No hay productos disponibles en este momento.</p>
                </div>
            <% } %>
        </div>
    </main>

<%- include('partials/footer') %>
    
<script src="/js/main.js"></script>